## 第一个程序

```java
package com.company;

public class Main {
    public static void main(String[] args) {
        System.out.println("Hello, world");
    }
}
```

## JVM

可执行文件`javac`是编译器，可执行文件`java`是虚拟机。

Java 11新增一个功能，可以直接运行一个单文件源码。

在实际项目中，单个不依赖第三方库的Java源码是非常罕见的，所以，绝大多数情况下，我们无法直接运行一个Java源码文件，原因是它需要依赖其他的库。

**总结**

使用`javac`可以将`.java`源码编译成`.class`字节码；

使用`java`可以运行一个已编译的Java程序，参数是类名。

## 类

按照惯例，类名要大写。

一个Java源码只能定义一个`public`类型的class，并且**class名称和文件名要完全一致**（这点与其他语言有明显不同）

代码的每一行以分号结尾。

`public static void main(String[] args)`是Java的固定方法入口。因此，Java程序总是从`main`方法开始执行。

`public`是访问修饰符，表示该`class`是公开的。不写public，也能正确编译，但是这个类将无法从命令行执行。`public`不仅可以修饰类，也可以修饰方法。



## 数据类型

计算机内存的最小存储单元是字节（byte），一个字节就是一个8位二进制数，即8个bit。它的二进制表示范围从`00000000`~`11111111`，换算成十进制是0~255，换算成十六进制是`00`~`ff`。

一个字节是1byte，1024字节是1K，1024K是1M，1024M是1G，1024G是1T。

java的char类型占用2个byte。

**各种整形范围**

- byte：-128 ~ 127
- short: -32768 ~ 32767
- int: -2147483648 ~ 2147483647
- long: -9223372036854775808 ~ 9223372036854775807



### float

表示`float`类型时，需要加上`f`。

### 引用类型

除了基本类型，都是引用类型

### 常量

加上`final`修饰符，就定义了常量。

### 字符和字符串

Java在内存中总是使用Unicode表示字符，要显示一个字符的Unicode编码，只需将`char`类型直接赋值给`int`类型即可。

还可以直接用转义字符`\u`+Unicode编码来表示一个字符

```java
char a = '\u0041';
```

**转义字符**

常见的转义字符包括：

- `\"` 表示字符`"`
- `\'` 表示字符`'`
- `\\` 表示字符`\`
- `\n` 表示换行符
- `\r` 表示回车符
- `\t` 表示Tab
- `\u####` 表示一个Unicode编码的字符



**字符串连接**

可以使用`+`连接字符串和任意数据类型。

如果用`+`连接字符串和其他数据类型，会将其他数据类型先自动转型为字符串，再连接



**多行字符串**

```java
String s = """
  SELECT * FROM
    users 
  WHERE id > 100
  ORDER BY name DESC
  """;
```

多行字符串前面共同的空格会被去掉

Java的字符串还有个重要特点，就是字符串不可变。



### 数组

```java
int[] ns = new int[5];
int len = ns.length;

// 另一种初始化方法，由编译器自动推算数组大小。
int[] ns = new int[] {1, 2, 3};
int[] ns = {1, 2, 3};
```

可变性

```java
int[] ns;
ns = new int[] {1, 2, 3, 4, 5};
ns = new int[] {1, 2, 3};
```

数组元素可以是值类型（如int）或引用类型（如String），但数组本身是引用类型；



### var

使用`var`可省略书写变量类型，此时编译器会自动推动变量类型。

```java
stringBuilder sb = new StringBuilder();
var sb = new StringBuilder(); // 跟go的写法有些像
```



### 空值null

引用类型的变量可以指向一个空值`null`，它表示不存在，变量不指向任何对象。



## 数据运算

除数为0时编译时不会报错，运行时才报错。

计算结果超出范围时会产生溢出，溢出不会报异常，却会得到一个奇怪的结果。

### 移位运算

对负数进行右移，最高位不动，因此结果仍是一个负数。

还有一种无符号的右移运算，使用`>>>`，它的特点是不管符号位，右移后高位总是补`0`，因此，对一个负数进行`>>>`右移，它会变成正数，原因是最高位的`1`变成了`0`。

对`byte`和`short`进行移位时，会首先转换为`int`再进行移位。

### 运算优先级

- `()`
- `!` `~` `++` `--`
- `*` `/` `%`
- `+` `-`
- `<<` `>>` `>>>`
- `&`
- `|`
- `+=` `-=` `*=` `/=`

### 类型自动提升

go语言在这点上不同，参与运算的类型必须是一模一样的。



### 浮点数运算

浮点数`0.1`在计算机中就无法精确表示，因为十进制的`0.1`换算成二进制是一个无限循环小数。但是，`0.5`这个浮点数又可以精确地表示。

整型和浮点型运算时，整型会自动提升为浮点型。

整数运算在除数为0时会报错，而浮点数运算在除数为0时不会报错，会返回几个特殊值。

- `NaN`表示Not a Number
- `Infinity`表示无穷大
- `-Infinity`表示负无穷大

### 布尔运算

布尔运算是一种关系运算，包括以下几类：

- 比较运算符：`>`，`>=`，`<`，`<=`，`==`，`!=`
- 与运算 `&&`
- 或运算 `||`
- 非运算 `!`

关系运算符的优先级从高到低依次是：

- `!`
- `>`，`>=`，`<`，`<=`
- `==`，`!=`
- `&&`
- `||`

### 短路运算



### 三元运算符

```java
b ? x : y
```

注意到三元运算`b ? x : y`会首先计算`b`，如果`b`为`true`，则只计算`x`，否则，只计算`y`。此外，`x`和`y`的类型必须相同，因为返回值不是`boolean`，而是`x`和`y`之一。